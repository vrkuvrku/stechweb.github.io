!function o(r,a,s){function u(n,e){if(!a[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);throw new Error("Cannot find module '"+n+"'")}var i=a[n]={exports:{}};r[n][0].call(i.exports,function(e){var t=r[n][1][e];return u(t||e)},i,i.exports,o,r,a,s)}return a[n].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,t,n){"use strict";t.exports=function(e,t){if(e.PaymentRequest){var n=t.userAgent;null!==/.*\(.*; wv\).*Chrome\/(?:53|54)\.\d.*/g.exec(n)&&(e.PaymentRequest=null,e.PaymentAddress=null)}}},{}],2:[function(e,t,n){"use strict";function o(){delete window.PaymentRequest,delete window.PaymentAddress}t.exports=function(e,t){if(e.PaymentRequest){var n=t.userAgent;if(null===/.*CriOS.*/g.exec(n)&&null===/.*Android.*Chrome.*/g.exec(n)){if(null!==/.*Chrome\/(?:63|64|65)\.\d.*/g.exec(n)){var i=e.RequestFileSystem||e.webkitRequestFileSystem;i&&i(e.TEMPORARY,100,function(){},o)}}}}},{}],3:[function(e,t,n){"use strict";t.exports=function(e,t){e.PaymentRequest&&/CriOS\/59/.test(t.userAgent)&&(e.PaymentRequest=null,e.PaymentAddress=null,e.PaymentResponse=null,e.PaymentRequestUpdateEvent=null)}},{}],4:[function(e,t,n){"use strict";function i(e){e&&(e.value=String(e.value))}function o(e){if(e&&e instanceof Array)for(var t=0;t<e.length;t++)i(e[t].amount)}function r(e){e&&(e.total&&i(e.total.amount),o(e.displayItems),o(e.shippingOptions),function(e){if(e&&e instanceof Array)for(var t=0;t<e.length;t++)e[t].total&&i(e[t].total.amount),o(e[t].additionalDisplayItems)}(e.modifiers))}t.exports=function(e,t){if(e.PaymentRequest&&/CriOS\/(62|63)/.test(t.userAgent)){var i=e.PaymentRequest;e.PaymentRequest=function(e,t,n){r(t),i.call(this,e,t,n)},e.PaymentRequest.prototype.__proto__=i.prototype;var n=__gCrWeb.paymentRequestManager.updateWith;__gCrWeb.paymentRequestManager.updateWith=function(e){e&&e.then instanceof Function&&e.catch instanceof Function||(e=Promise.resolve(e));var t=this;e.then(function(e){r(e),n.call(t,e)})}}}},{}],5:[function(e,t,n){"use strict";var a="https://wallet.microsoft.com",s=a+"/preview/canMakePayment",o=3e4;function i(){return console.log("canMakePayment() is polyfilled. The polyfill returns true if the logged in user has a card on file that is supported by the platform; otherwise, returns false.  The cards on file are currently not mediated against the supported networks listed in the PaymentRequest methodData."),new Promise(function(e,t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}).then(function(){return Promise.race([new Promise(function(i,e){var o=document.body,r=document.createElement("iframe");r.id="edge-canMakePayment-iframe",r.src=s,r.style.display="none",r.style.width="1px",r.style.height="1px";var t=function e(t){if(t.origin===a&&void 0!==t.data.canMakePayment){window.removeEventListener("message",e),o.removeChild(r);var n=t.data.canMakePayment;i(n)}};window.addEventListener("message",t),r.onerror=function(){window.removeEventListener("message",t),o.removeChild(r),i(!1)},o.appendChild(r)}),(i=o,new Promise(function(e,t){var n=setTimeout(function(){clearTimeout(n),t("canMakePayment timed out in "+i+" ms.")},i)}))]);var i})}t.exports=function(e,t){e.PaymentRequest&&(t.userAgent.indexOf("Edge/")<0||"canMakePayment"in e.PaymentRequest.prototype||(e.PaymentRequest.prototype.canMakePayment=i))}},{}],6:[function(e,t,n){"use strict";var i=e("./interventions/android-webview-53-54"),o=e("./interventions/chrome-incognito"),r=e("./interventions/chrome-ios-59"),a=e("./interventions/chrome-ios-62-63"),s=e("./interventions/edge-canMakePayment");i(window,navigator),o(window,navigator),r(window,navigator),a(window,navigator),s(window,navigator)},{"./interventions/android-webview-53-54":1,"./interventions/chrome-incognito":2,"./interventions/chrome-ios-59":3,"./interventions/chrome-ios-62-63":4,"./interventions/edge-canMakePayment":5}]},{},[6]);
//# sourceMappingURL=payment-shim.js.map
